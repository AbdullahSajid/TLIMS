var handleDateTimePicker=function(){$("#datetimepicker1").datetimepicker()},handleLabSelection=function(){var a=null,d=$(".multiple-select2").select2({placeholder:"Select Tests"});$("#lab").change(function(){a=null;$("#tests").empty();d.val(null).trigger("change");var c=$(this).find(":selected").val();$.ajax({type:"POST",url:"ajax/get_lab_tests_list.php",data:{lab:c},dataType:"json",cache:!1,success:function(b){if("undefined"==typeof b||null==b||null==b.length||0==b.length)console.log("No tests available");
else{a=[];for(var e in b){var c={};c.id=b[e];c.text=b[e];a.push(c)}console.log(a);d.select2({data:a,placeholder:"Select Tests"})}},error:function(a,e,c){console.log(e+" "+c)}})});d.on("change",function(){var a=d.select2("data");if("undefined"==typeof a||null==a||null==a.length||0==a.length)console.log("tests field is empty"),$("#payment").val("0.00");else{var b=[];a.forEach(function(a){console.log(a.id);b.push(a.id)});$.ajax({type:"POST",url:"ajax/get_lab_test_prices.php",data:{nameOfTests:JSON.stringify(b)},
cache:!1,success:function(a){"failed"==a?alert("Error Occured"):"academic commercial"==$("#order_type").find(":selected").val()?$("#payment").val(a/2):$("#payment").val(a)},error:function(a,b,c){console.log(b+" "+c)}})}})},handleSampleTestDescription=function(){$("#summernote").summernote({height:170,minHeight:null,maxHeight:null})},handlePaymentReceived=function(){$("#payment_received").change(function(){var a=Number($("#payment").val()),d=Number($("#payment_received").val());0==a||0==a||null==a||
""==a?($("#payment_received").val("0.00"),alert("You must set payment first")):d>a&&($("#payment_received").val("0.00"),alert("Received payment cannot be greater than total payment"))})},handleAcademicCustomer=function(){$("#order_type").change(function(){if("academic commercial"==$("#order_type").find(":selected").val()){var a=Number($("#payment").val());0==a||0==a||null==a||""==a?$("#payment").val("0.00"):($("#payment").val(a/2),console.log("payment set to half"))}"commercial"==$("#order_type").find(":selected").val()&&
(a=Number($("#payment").val()),0==a||0==a||null==a||""==a?$("#payment").val("0.00"):($("#payment").val(2*a),console.log("payment set to double")))})},SampleInsertion=function(){return{init:function(){handleDateTimePicker();handleSampleTestDescription();handleLabSelection();handlePaymentReceived();handleAcademicCustomer()}}}();